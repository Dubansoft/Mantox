@model IEnumerable<MantoxWebApp.Models.V_Marcas>

@{
    Layout = "~/Views/Shared/_PlantillaMantox.cshtml";
}

@section EstilosEncabezado {

    @Styles.Render("~/adminLte/css/jqGrid/")

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/Content/adminLte/jqtable/assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
    <![endif]-->
    <!--[if lte IE 9]>
      <link rel="stylesheet" href="/Content/adminLte/jqtable/assets/css/ace-ie.min.css" />
    <![endif]-->

}

<!-- Tabla dinámica en JQGrid -->

@Html.Partial("~/Views/Shared/_PlantillaTablaDinamica.cshtml")

<!-- /Tabla dinámica en JQGrid -->

@section ScriptsPieDePagina {


    <!-- inline scripts related to this page -->
    <script type="text/javascript">

        //Las columnas de la tabla y sus atributos
        var column_model = [

                    {
                        name: 'Id', //Nombre, igual a la columna de la tabla de la bd, ¡muy importante!
                        index: 'Id', //Índice, igual a la columna de la tabla de la bd, ¡muy importante!
                        key: true, //Clave primaria
                        width: 25, //Ancho, aproximado en px.
                        sortable: true, //¿Se pude ordenar esta columna? true o false
                        sorttype: "int" //Tipo de datos a ordenar (int, text)
                    },
                    {
                        name: 'Nombre',
                        index: 'Nombre',
                        width: 80,
                        sortable: true,
                        sorttype: "text",
                        editable: false
                    },
                    {
                        name: 'Estado',
                        index: 'Estado',
                        width: 50,
                        sortable: true,
                        sorttype: "text"
                    },
                    
                    

        ];

        //Los nombres de las columnas de la tabla.
        var column_names = [
                    'Id',
                    'Nombre',
                    'Estado'
        ];

        //Titulo de la lista
        var grid_caption = "Lista de @ViewData["NombreContexto"].ToString()";

        //Nombre del controlador
        var grid_controller = "@ViewData["NombreControlador"].ToString()";

        //Url base, dejar como está
        var base_url = "@ViewData["UrlBase"].ToString()";

        //Url de búsqueda de los datos de la tabla.
        var grid_data_url = "@string.Concat(@ViewData["UrlBase"].ToString(), @ViewData["NombreControlador"].ToString(), "/Buscar", ViewData["NombreContexto"].ToString().Replace(" ","_"), "?")"

        //Agrupar?
        var grid_grouping = false;

        //Agrupar cuales campos?
        var grid_group_fields = [];

        //Ancho de la primera columna
        var row_number_width = 20;

        //Altura de la tabla
        var grid_height = 'auto';

        //Seleccionar varios?
        var multi_select = false;

        //Poner paginador superior?
        var top_pager = true;

        //Mostrar subgrid?
        var show_subgrid = false;

        //Lo que se ejecuta cuando se expande el subgrid
        var subGridRow_Expanded = function (subgridDivId, rowId) {
            var subgridTableId = subgridDivId + "_t";
            $("#" + subgridDivId).html("<table id='" + subgridTableId + "'></table>");

            //$("#" + subgridTableId).jqGrid({
            //    mtype: "GET",
            //    datatype: "json",
            //    url: grid_data_url,
            //    colNames: ['Id', 'Empresa', 'Piso'],
            //    colModel: [

            //        { name: 'Id', width: 50 },
            //        { name: 'Empresa', width: 150 },
            //        { name: 'Piso', width: 50 }
            //    ],
            //    loadonce: true
            //});

            //$.ajax({
            //    url: grid_data_url,
            //    type: "GET",
            //    success: function (html) {
            //        $("#" + subgridTableId).append(html);
            //        alert(1);
            //    },
            //    fail: function (html) {
            //        $("#" + subgridTableId).append("Fail");
            //        alert(0);
            //    }
            //});
        };

        //Tipo de datos
        var data_type = "json";

        //Método de obtención de datos
        var method_type = "GET";

        //Cargar todo de una sola vez?
        var load_once = false;
    </script>

    <!-- page specific plugin scripts -->
    @Scripts.Render("~/adminLte/js/jqGrid/");


}
